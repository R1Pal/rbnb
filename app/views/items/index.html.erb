
<div class="container">

  <h4 class="text-center mt-5"> <strong>Find the perfect fit for your interior!</strong></h4>

  <div class="row justify-content-center">
    <div class="col-sm-8 my-3">
      <%= form_with url: items_path, method: :get, class: "d-flex" do %>
        <%#= text_field_tag :query,
              params[:query],
              class: "form-control mx-1",
              placeholder: "Key word"
        %>
        <%= text_field_tag :address,
              params[:address],
              class: "form-control mx-1",
              placeholder: "Location"
        %>
        <%= text_field_tag :category,
              params[:category],
              class: "form-control mx-1",
              placeholder: "Category"
        %>
        <%= text_field_tag :artist,
              params[:artist],
              class: "form-control  mx-1",
              placeholder: "Artist"
        %>
        <%= text_field_tag :title,
              params[:title],
              class: "form-control  mx-1",
              placeholder: "Name"
        %>
        <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>


      <div class="row">

        <p> <% if params[:query].present? %>Results for "<%=params[:query].capitalize %><% end %></p>

        <div class="col-md-8 d-flex justify-content-center map-box">

          <div class="map" style="width: 100%; height: 100%;"
            data-controller="map"
            data-map-markers-value="<%= @markers.to_json %>"
            data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
          </div>

        </div>

        <% @items.each do |item|%>

          <div class="col-md-4">

            <div style="height: 425px">
              <div class="flat-card">

                <div class="flat-card-image">
                  <div class="image-container">
                    <% item.photos.each do |photo| %>
                    <%= cl_image_tag photo.key, class: "img-fluid", crop: :fill %>
                    <% end %>
                  </div>
                </div>

                <div class="flat-card-content d-flex flex-column justify-content-between">

                  <div class="flat-card-title">
                    <h4 style="font-size: 20px">
                    <%= item.title  %></h4>
                  </div>

                  <p style="font-size: 16px">Artist : <%= item.artist %></p>
                  <p style="font-size: 14px">Address : <%= item.address %></p>

                  <div class="flex justify-content-between">
                    <div class="flex align-items-center">
                      <p>
                        <i class="<%= Item::CATEGORY[Item::CATEGORY_NAME.index(item.category)][:icon] %>"></i>
                        <span ><%= item.category %></span>
                      </p>
                    </div>

                    <div class="flex align-items-center ms-3">
                      <p>
                        <i class="fa-solid fa-euro-sign"></i>
                        <span><%= item.price %>/day </span>
                      </p>
                    </div>
                  </div>

                </div>

                  <div class="flat-card-actions">
                    <%= link_to "Show details", item_path(item) %>
                  </div>

              </div>
            </div>

          </div>

        <% end %>

      </div>

</div>
