
<div class="container">

  <h4 class="text-center mt-5"> <strong>Find the perfect fit for your interior!</strong></h4>

  <div class="row justify-content-center">
    <div class="col-sm-8 my-3">
      <%= form_with url: items_path, method: :get, class: "d-flex" do %>

      <%#= text_field_tag :query,
            params[:query],
            class: "form-control mx-1",
            placeholder: "Key word"
      %>
        <%= text_field_tag :address,
          params[:address],
          class: "form-control mx-1",
          # style: "width:150px",
          placeholder: "Location"
        %>
        <%= text_field_tag :category,
          params[:category],
          class: "form-control mx-1",
          # style: "width:150px",
          placeholder: "Category"
        %>
        <%# <%= select_tag :category, %>
          <%# options_for_select(Item::CATEGORY_NAME+[""]), %>
          <%# class: "form-control mx-1", %>
          <%# # style: "width:150px", %>
          <%# placeholder: params[:category].present? ? params[:category] : "Select category" %>
        <%# %>
        <%= text_field_tag :artist,
          params[:artist],
          class: "form-control  mx-1",
          # style: "width:150px",
          placeholder: "Artist"
        %>
        <%= text_field_tag :title,
          params[:title],
          class: "form-control  mx-1",
          # style: "width:150px",
          placeholder: "Name"
        %>

        <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>

  <div class="accordion" id="accordionExample">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Show / Hide map
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          <%# Map html to insert below %>
          <div class="row">
            <div class="col-md-12 d-flex justify-content-center map-box">
              <div class="map" style="width: 100%; height: 100%;"
                data-controller="map"
                data-map-markers-value="<%= @markers.to_json %>"
                data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
              </div>
            </div>
          </div>
          <%# Map html to insert above %>
        </div>
      </div>
    </div>
  </div>


      <div class="row">

        <% @items.each do |item|%>

          <div class="col-md-4">

            <div style="height: 425px">

              <div class="flat-card">

                <div class="flat-card-image">
                  <%= link_to item_path(item) do %>
                    <div class="image-container">
                      <% item.photos.each do |photo| %>
                        <%= cl_image_tag photo.key, class: "img-fluid", crop: :fill %>
                      <% end %>
                    </div>
                  <% end %>
                </div>

                <div class="flat-card-content d-flex flex-column justify-content-between">
                  <%= link_to item_path(item) do %>

                    <div class="flat-card-title">
                      <h4 style="font-size: 20px">
                      <%= item.title  %></h4>
                    </div>

                    <p style="font-size: 16px">Artist : <%= item.artist %></p>
                    <p style="font-size: 14px">Address : <%= item.address %></p>

                    <div class="flex justify-content-between">
                      <div class="flex align-items-center">
                        <p>
                          <i class="<%= Item::CATEGORY[Item::CATEGORY_NAME.index(item.category)][:icon] %>"></i>
                          <span ><%= item.category %></span>
                        </p>
                      </div>

                      <div class="flex align-items-center ms-3">
                        <p>
                          <i class="fa-solid fa-euro-sign"></i>
                          <span><%= item.price %>/day </span>
                        </p>
                      </div>
                    </div>

                  <% end  %>
                </div>

                <div class="flat-card-actions">
                  <p data-controller="toggle-favorite" data-action="click->toggle-favorite#fire">
                    <i data-toggle-favorite-target="togglableElement" class="fa-regular fa-heart "></i>
                    <i data-toggle-favorite-target="togglableItem" class="fa-solid fa-heart d-none"></i>
                    Add to favorites
                  </p>
                </div>

              </div>
            </div>

          </div>

        <% end %>

      </div>

</div>
